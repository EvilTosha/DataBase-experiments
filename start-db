#!/bin/bash

function usage
{
    echo "Usage: start-db [options] <action> ..."
    echo "Actions:"
}

dev=
action=
servername=
swankport=


while [ "$1" != "" ]; do
    case $1 in
        -d | --dev )            dev=1
                                ;;
        --help )                usage
                                exit
                                ;;
        --swank-port )          shift
                                swankport=$1
                                ;;
        start-shard )           action="start-shard"
                                shift
                                servername=$1
                                ;;
        start-router )          action="start-router"
                                shift
                                servername=$1
                                ;;
        * )                     usage
                                exit 1
    esac
    shift
done

# needed for doing correct action inside lisp
export dev
export action
export servername
export swankport

screen -dmS database-web-console sbcl --lose-on-corruption --disable-ldb --load start.lisp
